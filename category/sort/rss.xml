<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title>码坑的博客 • Posts by &#34;sort&#34; category</title>
        <link>https://ahjie668.github.io/ahjie668</link>
        <description>本人是小白,初次与各位相遇,请多多指教,谢谢 じ萌喵喵ルゞ Ю↘ 珂ル°</description>
        <language>zh-Hans</language>
        <pubDate>Thu, 27 Aug 2020 23:39:38 +0800</pubDate>
        <lastBuildDate>Thu, 27 Aug 2020 23:39:38 +0800</lastBuildDate>
        <category>Hexo</category>
        <category>Maven</category>
        <category>JAVA</category>
        <category>JavaScript</category>
        <category>css</category>
        <category>React</category>
        <category>Vue</category>
        <category>Docker</category>
        <item>
            <guid isPermalink="true">https://ahjie668.github.io/ahjie668/2020/08/27/java/docker/</guid>
            <title>Docker安装部署</title>
            <link>https://ahjie668.github.io/ahjie668/2020/08/27/java/docker/</link>
            <category>Docker</category>
            <pubDate>Thu, 27 Aug 2020 23:39:38 +0800</pubDate>
            <description><![CDATA[ &lt;h2 id=&#34;前言&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#前言&#34;&gt;#&lt;/a&gt; 💍 前言&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;从 2017 年 3 月开始 docker 在原来的基础上分为两个分支版本: Docker CE 和 Docker EE。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Docker CE 即社区免费版，Docker EE 即企业版，强调安全，但需付费使用。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Docker 官方建议要 CentOS7.0 及以上系统版本，本文介绍 Docker CE 在 CentOS 下的安装使用。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;1前提条件&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#1前提条件&#34;&gt;#&lt;/a&gt; 💍 1. 前提条件&lt;/h2&gt;
&lt;h3 id=&#34;11内核&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#11内核&#34;&gt;#&lt;/a&gt; 💍 1.1. 内核&lt;/h3&gt;
&lt;p&gt;Docker 运行对内核要求比较高，因此一般建议直接在 Ubuntu 这样的平台运行。但作为一个容器标准，Docker 也是支持其他如 CentOS, Mac OS X, Windows 等平台。目前 Docker 支持以下版本 CentOS:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;CentOS 7 (64 位)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;CentOS 6.5 (64 位) 及以后&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在运行 CentOS 6.5 及以后版本时，需要内核版本 &amp;gt;=2.6.32-431，因为这些内核包含了运行 Docker 的一些特定修改。&lt;/p&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;$&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;uname&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;-r&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;number&#34;&gt;2.6&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.32&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;-431.17&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&lt;span class=&#34;string&#34;&gt;.el6.x86_64&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;font style=&#34;color:red&#34;&gt;注：网上很多教程说 CentOS6.5 必须要升级内核到 3.10 才能使用 docker，其实是【可选】升级，但最好升级。&lt;/font&gt;&lt;/p&gt;
&lt;h3 id=&#34;12device-mapper&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#12device-mapper&#34;&gt;#&lt;/a&gt; 💍 1.2.Device Mapper&lt;/h3&gt;
&lt;p&gt;Docker 默认使用 AUFS 作为存储驱动，但是 AUFS 并没有被包括在 Linux 的主线内核中。CentOS 中可以使用 Device Mapper 作为存储驱动，这是在 2.6.9 内核版本引入的新功能。我们需要先确认是否启用该功能:&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Bash&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;$ ls -l /sys/class/misc/device-mapper&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;lrwxrwxrwx 1 root root 0 May  1 20:55 /sys/class/misc/device-mapper -&amp;gt; ../../devices/virtual/misc/device-mapper&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果没有检测到 Device Mapper，需要安装 device-mapper 软件包:&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Bash&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;$ sudo yum install -y device-mapper&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后重新加载 dm_mod 内核模块:&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Bash&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;$ sudo modprobe dm_mod&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&#34;2安装&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#2安装&#34;&gt;#&lt;/a&gt; 💍 2. 安装&lt;/h2&gt;
&lt;h3 id=&#34;221准备&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#221准备&#34;&gt;#&lt;/a&gt; 💍 2.2.1. 准备&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;CentOS7 能上外网&lt;/li&gt;
&lt;li&gt;yum -y install gcc&lt;/li&gt;
&lt;li&gt;yum -y install gcc-c++&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img data-src=&#34;https://shitu-query-gz.gz.bcebos.com/2020-08-28/01/ed0ab81d1dcc230b?authorization=bce-auth-v1%2F7e22d8caf5af46cc9310f1e3021709f3%2F2020-08-28T01%3A01%3A59Z%2F300%2Fhost%2F634aab59f3d5d36da29d98a241da51dd90e8d70f6d24504b1da50457f55afe50&#34; alt&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;卸载旧版本&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;yum remove docker \ docker-client \ docker-client-latest \ docker-common \ docker-latest \ docker-latest-logrotate \ docker-logrotate \ docker-selinux \ docker-engine-selinux \ docker-engine&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img data-src=&#34;https://shitu-query-gz.gz.bcebos.com/2020-08-28/01/c554d270e1a2b109?authorization=bce-auth-v1%2F7e22d8caf5af46cc9310f1e3021709f3%2F2020-08-28T01%3A03%3A52Z%2F300%2Fhost%2Fc0f440a9352663decd956cdc123b27574700d95edc2924fda325423dbf82bbf3&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;如果 yum 报告未安装任何这些软件包，这表示情况正常。&lt;/p&gt;
&lt;h3 id=&#34;222安装&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#222安装&#34;&gt;#&lt;/a&gt; 💍 2.2.2. 安装&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;安装依赖包&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;yum&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;install&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;-y&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;yum-utils&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;device-mapper-persistent-data&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;lvm2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;设置 stable 镜像仓库&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;yum-config-manager&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;--add-repo&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;https://download.docker.com/linux/centos/docker-ce.repo&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;或&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;yum-config-manager&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;--add-repo&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;https://shitu-query-gz.gz.bcebos.com/2020-08-28/01/fc2f3365576d36b7?authorization=bce-auth-v1%2F7e22d8caf5af46cc9310f1e3021709f3%2F2020-08-28T01%3A04%3A35Z%2F300%2Fhost%2Fb07a7486e8145e8eb5acc0a5f85e278a8d0f74d63611bcf8a3419b65905cf642&#34; alt&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;更新 yum 软件包索引&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;yum&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;makecache&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;fast&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;https://shitu-query-gz.gz.bcebos.com/2020-08-28/01/f751ea6cf6e3995b?authorization=bce-auth-v1%2F7e22d8caf5af46cc9310f1e3021709f3%2F2020-08-28T01%3A05%3A12Z%2F300%2Fhost%2F606e1c388cd1e73cc29f1ad1d0a13addb5eeb4bfa8f73a09b18f4162608d73de&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;如果这是自添加 Docker 镜像仓库以来您首次刷新软件包索引，系统将提示您接受 GPG 密钥，并且将显示此密钥的指纹。验证指纹是否正确，并且在正确的情况下接受此密钥。指纹应匹配 060A 61C5 1B55 8A7F 742B 77AA C52F EB6B 621E 9F35&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;安装 docker&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;安装指定版本&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;yum&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;list&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;docker-ce.x86_64&lt;/span&gt;  &lt;span class=&#34;string&#34;&gt;--showduplicates&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;sort&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;-r&lt;/span&gt;    &lt;span class=&#34;comment&#34;&gt;#从高到低列出Docker-ce的版本&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;https://shitu-query-gz.gz.bcebos.com/2020-08-28/01/ed0ab81d1dcc230b?authorization=bce-auth-v1%2F7e22d8caf5af46cc9310f1e3021709f3%2F2020-08-28T01%3A05%3A39Z%2F300%2Fhost%2Fc6ab7f450ff4e7557ffdea771708eb1c5d2378b1b7142b3bcba7c29c80038e1c&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;该软件包名称是软件包名称（docker-ce）加上版本字符串（第二列），从第一个冒号（:）一直到第一个连字符，并用连字符（-）分隔。&lt;/p&gt;
&lt;p&gt;例如：指定版本（docker-ce-18.09.9）进行安装&lt;/p&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;yum&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;install&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;docker-ce-&amp;lt;VERSION_STRING&amp;gt;&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;docker-ce-cli-&amp;lt;VERSION_STRING&amp;gt;&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;containerd.io&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# 例如：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;yum&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;install&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;docker-ce-18.09.9&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;docker-ce-cli-18.09.9&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;containerd.io&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;https://shitu-query-gz.gz.bcebos.com/2020-08-28/01/81869032252db180?authorization=bce-auth-v1%2F7e22d8caf5af46cc9310f1e3021709f3%2F2020-08-28T01%3A06%3A08Z%2F300%2Fhost%2Fc52bb05fb58b234101ee4bbb59591d43201394970fdb59613f90cfb1ea1ccd15&#34; alt&gt;&lt;/p&gt;
&lt;h2 id=&#34;安装最新版本&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#安装最新版本&#34;&gt;#&lt;/a&gt; 💍 安装最新版本：&lt;/h2&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;yum&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;-y&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;install&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;docker-ce&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;启动 docker&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;执行以下命令启动 docker：&lt;/p&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;systemctl&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;start&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;docker&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;测试 docker&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img data-src=&#34;https://shitu-query-gz.gz.bcebos.com/2020-08-28/01/e9d27a5b57d76515?authorization=bce-auth-v1%2F7e22d8caf5af46cc9310f1e3021709f3%2F2020-08-28T01%3A06%3A34Z%2F300%2Fhost%2F46703f90d9f0047f8e4446a97a31815179f4339227e179273753d9424b52d3f4&#34; alt&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2.2.CentOS 6.5&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;221准备-2&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#221准备-2&#34;&gt;#&lt;/a&gt; 💍 2.2.1. 准备&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;禁用 selinux [可选]&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;由于 Selinux 和 LXC 有冲突，所以需要禁用 selinux. 编辑 /etc/selinux/config, 设置两个关键变量.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;SELINUX=disabled&lt;br&gt;
SELINUXTYPE=targeted&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;font style=&#34;color:red&#34;&gt;注：网上有教程说要设置，但我建议不要设置，因为会影响安全性&lt;/font&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;安装 Fedora EPEL 源&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Bash&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;yum install http://ftp.riken.jp/Linux/fedora/epel/6/x86_64/epel-release-6-8.noarch.rpm&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;https://shitu-query-gz.gz.bcebos.com/2020-08-28/01/da3a46b7ccca7f74?authorization=bce-auth-v1%2F7e22d8caf5af46cc9310f1e3021709f3%2F2020-08-28T01%3A07%3A00Z%2F300%2Fhost%2F6d91c880fb4850d7e08d04ae8331b1a3cf43c363770b075e82efc39ca62c96a1&#34; alt&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;添加 hop5.repo 源&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Bash&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;cd&lt;/span&gt; /etc/yum.repos.d&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;wget http://www.hop5.in/yum/el6/hop5.repo&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&#34;222yum安装&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#222yum安装&#34;&gt;#&lt;/a&gt; 2.2.2.yum 安装&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;升级带 aufs 模块的 3.10 内核【可选】&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Bash&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;yum install kernel-ml-aufs kernel-ml-aufs-devel&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;``` &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;修改grub的主配置文件/etc/grub.conf，设置default=0，表示第一个title下的内容为默认启动的kernel（一般新安装的内核在第一个位置）：&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;![](https://shitu-query-gz.gz.bcebos.com/2020-08-28/01/8787f7baffc1d2c7?authorization=bce-auth-v1%2F7e22d8caf5af46cc9310f1e3021709f3%2F2020-08-28T01%3A07%3A30Z%2F300%2Fhost%2Ff45db2d0ee924eec42ee7e01b707c67e15d01884c4212369dde2a4d1439ec9c0)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;font style=&lt;span class=&#34;string&#34;&gt;&amp;quot;color:red&amp;quot;&lt;/span&gt;&amp;gt;重启系统 reboot now，&amp;lt;/font&amp;gt;然后执行以下命令查看是否已经是3.10内核：&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;``` bash Bash&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@localhost ~]&lt;span class=&#34;comment&#34;&gt;# uname -r&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3.18.5-3.el6.x86_64&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Bash&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[root@localhost ~]&lt;span class=&#34;comment&#34;&gt;# grep aufs /proc/filesystems&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;nodev aufs&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;安装 docker&lt;br&gt;
 安装依赖：&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;yum&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;install&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;redhat-lsb&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;yum&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;install&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;device-mapper-libs&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;yum&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;install&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;libcgroup*&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如出现以下错误：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;https://shitu-query-gz.gz.bcebos.com/2020-08-28/01/13ebc06b505c6a21?authorization=bce-auth-v1%2F7e22d8caf5af46cc9310f1e3021709f3%2F2020-08-28T01%3A08%3A12Z%2F300%2Fhost%2F2a402a31df4351d43653860b223abeddbc059ae97c18321aae4b0345ee3d6f2f&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;解决办法是编辑 /etc/yum.repos.d/epel.repo，把基础的恢复 (baseurl)，镜像 (mirrorlist) 的地址注释掉：&lt;br&gt;
&lt;img data-src=&#34;https://shitu-query-gz.gz.bcebos.com/2020-08-28/01/ec8e184d768f30c0?authorization=bce-auth-v1%2F7e22d8caf5af46cc9310f1e3021709f3%2F2020-08-28T01%3A08%3A39Z%2F300%2Fhost%2F9de3eb462adbd75ebcac43110605bafdd98f03743ccdd6cf7ec7585231f7c26f&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;安装 docker：&lt;/p&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;yum&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;install&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;docker-io&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如出现以下报错：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Bash&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;Error: Cannot retrieve metalink &lt;span class=&#34;keyword&#34;&gt;for&lt;/span&gt; repository: epel. Please verify its path and try again&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;解决办法是编辑 /etc/yum.repos.d/epel.repo，把基础的恢复 (baseurl)，镜像 (mirrorlist) 的地址注释掉：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;https://shitu-query-gz.gz.bcebos.com/2020-08-28/01/ec8e184d768f30c0?authorization=bce-auth-v1%2F7e22d8caf5af46cc9310f1e3021709f3%2F2020-08-28T01%3A09%3A38Z%2F300%2Fhost%2F765d91ff1b6904826410054e6625f82cf9f4f979f0336efd540d2c8f430bcf66&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;如出现如下错误：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;https://shitu-query-gz.gz.bcebos.com/2020-08-28/01/5312413caa618726?authorization=bce-auth-v1%2F7e22d8caf5af46cc9310f1e3021709f3%2F2020-08-28T01%3A10%3A03Z%2F300%2Fhost%2F07e568e538dd43682b9e125f2f245eca7411ec3d9b19ff4b5e9ce2a1df202652&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;原因是：网络问题，下载失败。解决办法：则执行多几次 yum install docker-io 命令，直至下载并安装成功（我这里耗时 1 个多小时）。&lt;/p&gt;
&lt;p&gt;继续安装，如出现以下信息，则说明能正常安装：&lt;br&gt;
&lt;img data-src=&#34;https://shitu-query-gz.gz.bcebos.com/2020-08-28/01/35fd5585bfdebb05?authorization=bce-auth-v1%2F7e22d8caf5af46cc9310f1e3021709f3%2F2020-08-28T01%3A10%3A35Z%2F300%2Fhost%2F7b5411a84e678ab1c7308683b688c75d125e7249fb26f4ebeb7a30e254c7bd01&#34; alt&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;启动 docker&lt;br&gt;
 执行以下命令启动 docker：&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;service&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;docker&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;start&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;https://shitu-query-gz.gz.bcebos.com/2020-08-28/01/1d8fcd1b367944cd?authorization=bce-auth-v1%2F7e22d8caf5af46cc9310f1e3021709f3%2F2020-08-28T01%3A11%3A00Z%2F300%2Fhost%2Fbcb0232d276bdd0d84872adc9d8dcf81bb6ee9ed161db990c10962a3b24b0c37&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;如出现以上提示则说明安装并启动成功。&lt;br&gt;
&lt;font style=&#34;color:red&#34;&gt;如出现以下提示则说明安装失败：&lt;/font&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;https://shitu-query-gz.gz.bcebos.com/2020-08-28/01/18fd6190b3857225?authorization=bce-auth-v1%2F7e22d8caf5af46cc9310f1e3021709f3%2F2020-08-28T01%3A11%3A26Z%2F300%2Fhost%2Ff231a526c44b5ca649f8fa37ebb1fb0eb0039b1586d0b5b20239ccab42ad53e3&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;解决方法：执行以下命令删除 docker-io&lt;/p&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;yum&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;remove&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;docker-io&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;https://shitu-query-gz.gz.bcebos.com/2020-08-28/01/cb46ef455d0b81d2?authorization=bce-auth-v1%2F7e22d8caf5af46cc9310f1e3021709f3%2F2020-08-28T01%3A11%3A54Z%2F300%2Fhost%2F4bee577772e56129297a0043d61f2b154f7e9c1949ec9b28f424e17381823323&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;执行以下命令手工安装 docker：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Bash&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;rpm -ivh ./docker-engine-1.7.1-1.el6.x86_64.rpm&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;https://shitu-query-gz.gz.bcebos.com/2020-08-28/01/7fe9307f292ca386?authorization=bce-auth-v1%2F7e22d8caf5af46cc9310f1e3021709f3%2F2020-08-28T01%3A12%3A23Z%2F300%2Fhost%2Fc790a97fc5dcccb05f8c03d59c623d2778c182a09525670bbf38bebb511b2631&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;注：安装包下载地址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly95dW0uZG9ja2VycHJvamVjdC5vcmcvcmVwby9tYWluL2NlbnRvcy82L1BhY2thZ2VzLw==&#34;&gt;https://yum.dockerproject.org/repo/main/centos/6/Packages/&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;再次执行以下命令启动 docker：&lt;/p&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;service&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;docker&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;start&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;https://shitu-query-gz.gz.bcebos.com/2020-08-28/01/3e2403bc544fc204?authorization=bce-auth-v1%2F7e22d8caf5af46cc9310f1e3021709f3%2F2020-08-28T01%3A12%3A49Z%2F300%2Fhost%2Fa8be4b8ad534a6b9780860ea80eab54a2438ee6d9195d154d6e96cf292b117ff&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;【可选】设置在服务器启动时启动:&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;chkconfig&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;docker&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;on&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&#34;3使用&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#3使用&#34;&gt;#&lt;/a&gt; 3. 使用&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;查看 docker 版本&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;docker&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;version&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;https://shitu-query-gz.gz.bcebos.com/2020-08-28/01/5e3ebe14d6fd1c11?authorization=bce-auth-v1%2F7e22d8caf5af46cc9310f1e3021709f3%2F2020-08-28T01%3A13%3A19Z%2F300%2Fhost%2F7de7f561a2efe2fdf28f7d5d72aa5152bcd599ba1d36a3a0bd304d733ab3cb95&#34; alt&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;查看 docker 日志&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;cat&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;/var/log/docker&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;https://shitu-query-gz.gz.bcebos.com/2020-08-28/01/3ce96acb6c55efbc?authorization=bce-auth-v1%2F7e22d8caf5af46cc9310f1e3021709f3%2F2020-08-28T01%3A13%3A46Z%2F300%2Fhost%2Ffe806a69518d875bcb884bab8229316588faf2e47a25fb7d24a9caf668caee24&#34; alt&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;搜索镜像&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;docker&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;search&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;tomcat&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;https://shitu-query-gz.gz.bcebos.com/2020-08-28/01/122f16183ed2f643?authorization=bce-auth-v1%2F7e22d8caf5af46cc9310f1e3021709f3%2F2020-08-28T01%3A14%3A24Z%2F300%2Fhost%2F9174bb3f36619a834e734011e419c38127fbb15db4cbdba54bccbcea220603d3&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;&lt;font style=&#34;color:red&#34;&gt; 注：start 代表受欢迎程度。OFFICIAL 代表官方版本&lt;/font&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;查看当前所有镜像&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;docker&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;images&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;下载镜像&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;docker&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;pull&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;centos&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;运行容器&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;docker&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;run&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;centos&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;hello word&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;运行容器 hello word&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;docker&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;run&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;hello-world&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;https://shitu-query-gz.gz.bcebos.com/2020-08-28/01/919f874ae7f7f9ee?authorization=bce-auth-v1%2F7e22d8caf5af46cc9310f1e3021709f3%2F2020-08-28T01%3A15%3A03Z%2F300%2Fhost%2Ffdc7677fa86d4123c796679e7842e2dfdb7bcb04dd7f20a07ea58b15cb9b8a86&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;输出这段提示以后，hello world 就会停止运行，容器自动终止。&lt;/p&gt;
&lt;h2 id=&#34;4删除&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#4删除&#34;&gt;#&lt;/a&gt; 💍 4. 删除&lt;/h2&gt;
&lt;p&gt;可以使用 yum 来删除 docker&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;查询删除 docker&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;列出 docker 包的具体的名字&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;$&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;yum&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;list&lt;/span&gt;  &lt;span class=&#34;string&#34;&gt;installed&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;grep&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;docker&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;containerd.io.x86_64&lt;/span&gt;                 &lt;span class=&#34;number&#34;&gt;1.2&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.4&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;-3.1&lt;/span&gt;&lt;span class=&#34;string&#34;&gt;.el7&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;docker-ce.x86_64&lt;/span&gt;                     &lt;span class=&#34;number&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;string&#34;&gt;:18.09.3-3.el7&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;docker-ce-cli.x86_64&lt;/span&gt;                 &lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;string&#34;&gt;:18.09.3-3.el7&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;删除 docker&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;$&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;yum&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;-y&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;remove&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;containerd.io.x86_64&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;\&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                     &lt;span class=&#34;string&#34;&gt;docker-ce.x86_64&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;\&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                     &lt;span class=&#34;string&#34;&gt;docker-ce-cli.x86_64&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;直接删除 docker&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;yum&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;remove&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;docker&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;\&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                  &lt;span class=&#34;string&#34;&gt;docker-io&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;\&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                  &lt;span class=&#34;string&#34;&gt;docker-client&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;\&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                  &lt;span class=&#34;string&#34;&gt;docker-client-latest&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;\&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                  &lt;span class=&#34;string&#34;&gt;docker-common&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;\&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                  &lt;span class=&#34;string&#34;&gt;docker-latest&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;\&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                  &lt;span class=&#34;string&#34;&gt;docker-latest-logrotate&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;\&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                  &lt;span class=&#34;string&#34;&gt;docker-logrotate&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;\&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                  &lt;span class=&#34;string&#34;&gt;docker-engine&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;备注：以上命令只会删除 docker 运行环境，并不会删除镜像，容器，卷文件，以及用户创建的配置文件。&lt;/p&gt;
&lt;p&gt;清除镜像和容器文件：&lt;/p&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;rm&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;-rf&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;/var/lib/docker&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;手动查找并删除用户创建的配置文件&lt;/p&gt;
&lt;h2 id=&#34;5注意&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#5注意&#34;&gt;#&lt;/a&gt; 💍 5. 注意&lt;/h2&gt;
&lt;h3 id=&#34;51手动挂载cgroup&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#51手动挂载cgroup&#34;&gt;#&lt;/a&gt; 💍 5.1. 手动挂载 cgroup&lt;/h3&gt;
&lt;p&gt;低版本的 Redhat (6.3) 可能要手动挂载 cgroup，具体操作方法如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;首选禁用 cgroup 对应服务 cgconfig&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;service&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;cgconfig&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;stop&lt;/span&gt; &lt;span class=&#34;comment&#34;&gt;# 关闭服务 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;chkconfig&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;cgconfig&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;off&lt;/span&gt; &lt;span class=&#34;comment&#34;&gt;# 取消开机启动&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;```&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;bullet&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;然后挂载cgroup,可以命令行挂载&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;```yaml&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;Yaml&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;mount&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;-t&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;cgroup&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;none&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;/cgroup&lt;/span&gt;  &lt;span class=&#34;comment&#34;&gt;#仅本次有效&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;或者修改配置文件，编辑 /etc/fstab, 加入&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;none                    /cgroup                 cgroup  defaults        0 0&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img data-src=&#34;https://img2018.cnblogs.com/i-beta/1577453/202001/1577453-20200114105456092-1793581430.png&#34; alt&gt;&lt;/p&gt;
&lt;h3 id=&#34;52以非root用户管理docker&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#52以非root用户管理docker&#34;&gt;#&lt;/a&gt; 💍 5.2. 以非 root 用户管理 docker&lt;/h3&gt;
&lt;p&gt;Docker 守护程序绑定到 Unix socket 而不是 TCP 端口。默认情况下，Unix socke 是 root 用户才有，而其他用户只能通过使用 sudo 使用它。Docker 守护程序始终以 root 用户身份运行。&lt;/p&gt;
&lt;p&gt;如果您不想在 docker 命令前加上 sudo，请创建一个名为 docker 的 Unix 组并向其添加用户。当 Docker 守护程序启动时，它会创建一个可由该 docker 组成员访问的 Unix socket。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1. 创建 docker 组&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;groupadd&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;docker&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;2. 添加 user 到 docker 组&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;usermod&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;-aG&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;docker&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;$USER&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;请将 $USER 替换为系统中你的除 root 外的某个用户。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;3. 注销并重新登录，以便重新评估您的组成员身份。&lt;br&gt;
如果在虚拟机上进行测试，则可能需要重新启动虚拟机才能使更改生效。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;4. 验证是否可以通过不使用 sudo 运行 docker 命令。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;docker&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;run&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;hello-world&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果最初在添加用户到 docker 组之前，使用的是 sudo 的 Dokcer CLI 命令。你可能会出现如下错误，表明你的～/.docker 目录由于 sudo 命令而创建的权限不正确。&lt;/p&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;attr&#34;&gt;WARNING: Error loading config file:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;/home/user/.docker/config.json&lt;/span&gt; &lt;span class=&#34;bullet&#34;&gt;-&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;attr&#34;&gt;stat /home/user/.docker/config.json:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;permission&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;denied&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;要解决此问题，请删除～/.docker/ 目录（它会自动重新创建，但任何自定义设置都会丢失），或使用以下命令更改其所有权和权限：&lt;/p&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;$&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;chown&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;$USER&amp;quot;&lt;/span&gt;&lt;span class=&#34;string&#34;&gt;:&amp;quot;$USER&amp;quot;&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;/home/&amp;quot;$USER&amp;quot;/.docker&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;-R&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;$&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;chmod&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;g+rwx&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;$HOME/.docker&amp;quot;&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;-R&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&#34;53镜像加速&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#53镜像加速&#34;&gt;#&lt;/a&gt; 💍 5.3. 镜像加速&lt;/h3&gt;
&lt;p&gt;鉴于国内网络问题，后续拉取 Docker 镜像十分缓慢，我们可以需要配置加速器来解决。&lt;/p&gt;
&lt;p&gt;Docker 国内镜像：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;网易加速器：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL2h1Yi1taXJyb3IuYy4xNjMuY29t&#34;&gt;http://hub-mirror.c.163.com&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;官方中国加速器：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9yZWdpc3RyeS5kb2NrZXItY24uY29t&#34;&gt;https://registry.docker-cn.com&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;ustc 的镜像：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9kb2NrZXIubWlycm9ycy51c3RjLmVkdS5jbg==&#34;&gt;https://docker.mirrors.ustc.edu.cn&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;也可使用私人镜像加速器地址，如使用阿里云的镜像加速器：登录阿里云 -&amp;gt; 产品 -&amp;gt; 搜索 &amp;quot;容器镜像服务&amp;quot;-&amp;gt; 镜像库 -&amp;gt; 镜像加速器。&lt;/p&gt;
&lt;p&gt;新版的 Docker 使用 /etc/docker/daemon.json（Linux） 来配置 Daemon。&lt;/p&gt;
&lt;p&gt;请在该配置文件中加入（没有该文件的话，请先建一个）：&lt;/p&gt;
&lt;figure class=&#34;highlight json&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Json&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;vi /etc/docker/daemon.json &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;　　&lt;span class=&#34;attr&#34;&gt;&amp;quot;registry-mirrors&amp;quot;&lt;/span&gt;: [&lt;span class=&#34;string&#34;&gt;&amp;quot;https://hub-mirror.c.163.com&amp;quot;&lt;/span&gt;] &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;配置成功后，CentOS6.5 重启：&lt;/p&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;service&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;docker&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;restart&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;配置成功后，CentOS7 重启：&lt;/p&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;Yaml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;systemctl&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;daemon-reload&lt;/span&gt;     &lt;span class=&#34;comment&#34;&gt;#重启加速配置文件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;systemctl&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;restart&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;docker&lt;/span&gt;    &lt;span class=&#34;comment&#34;&gt;#重启docker后台服务&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;systemctl&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;docker&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;statle&lt;/span&gt;     &lt;span class=&#34;comment&#34;&gt;#开启docker服务&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;systemctl&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;docker&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;stop&lt;/span&gt;       &lt;span class=&#34;comment&#34;&gt;#关闭docker服务&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;下棋给大家说一下在 docker 上安装 mysql 数据库并且映射端口号外部进行连接&lt;br&gt;
如哪里错误请指点出来，大家一起讨论学习&lt;/p&gt;
&lt;h2 id=&#34;各位有问题也可以搜索微信公众号码坑私信我大家一起讨论学习&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#各位有问题也可以搜索微信公众号码坑私信我大家一起讨论学习&#34;&gt;#&lt;/a&gt; 💍 各位有问题也可以搜索微信公众号” 码坑” 私信我，大家一起讨论学习。&lt;/h2&gt;
&lt;p&gt;&lt;img data-src=&#34;https://qr.api.cli.im/newqr/create?data=http%253A%252F%252Fweixin.qq.com%252Fr%252FxTkRCRjERUU6rVxq92zX&amp;amp;level=H&amp;amp;transparent=0&amp;amp;bgcolor=%23ffffff&amp;amp;forecolor=%2368B56B&amp;amp;blockpixel=12&amp;amp;marginblock=2&amp;amp;logourl=https://mhimg.clewm.net/cli/images/beautify/new/logo/35.png&amp;amp;size=400&amp;amp;logoshape=ellipse&amp;amp;foretype=2&amp;amp;gradient_way=vertical&amp;amp;forecolor2=%2304777A&amp;amp;eye_use_fore=1&amp;amp;background=//static.clewm.net/cli/images/background/31.png&amp;amp;qrcode_eyes=circle_circle&amp;amp;outcolor=%23063492&amp;amp;incolor=%231183E8&amp;amp;body_type=17&amp;amp;water_ratio=1&amp;amp;qr_rotate=0&amp;amp;text=&amp;amp;kid=bizcliim&amp;amp;time=1598267946&amp;amp;key=5d831a6325d08f0fe6e1b90c8f28ea26&#34; alt=&#34;微信公众号&#34;&gt;&lt;/p&gt;
 ]]></description>
        </item>
    </channel>
</rss>
