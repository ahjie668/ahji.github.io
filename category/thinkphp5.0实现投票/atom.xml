<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://ahjie.top</id>
    <title>码坑的博客 • Posts by &#34;thinkphp5.0实现投票&#34; category</title>
    <link href="https://ahjie.top" />
    <updated>2021-03-10T02:11:31.093Z</updated>
    <category term="其他" />
    <category term="Hexo" />
    <category term="JAVA" />
    <category term="Maven" />
    <category term="php" />
    <category term="html" />
    <category term="JavaScript" />
    <category term="css" />
    <category term="React" />
    <category term="Vue" />
    <category term="Docker" />
    <entry>
        <id>https://ahjie.top/php/PHP_vote/</id>
        <title>thinkphp5.0实现投票</title>
        <link rel="alternate" href="https://ahjie.top/php/PHP_vote/"/>
        <content type="html">&lt;h2 id=&#34;简介&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#简介&#34;&gt;#&lt;/a&gt; 💍 &lt;span class=&#34;rainbow&#34;&gt;简介&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;现在投票的功能，不管是 Web 端，小程序端，APP 端，现在投票这个功能可以说还是挺火的&lt;br&gt;
今天呢，阿杰就给大家带来一个利用 php 中 thinkphp5.0 框架集合实现一个投票的功能，&lt;br&gt;
 我这边投票是用在了微信小程序端上，废话不多说，下面就给大家演示代码.&lt;/p&gt;
&lt;p&gt;💍 &lt;span class=&#34;rainbow&#34;&gt;在文章底部点击赞赏，请我喝杯奶茶哦！&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;💍 &lt;span class=&#34;rainbow&#34;&gt;正在努力学习～~ ~ ~ ~ ~ ~ ~&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&#34;来吧-~-展示&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#来吧-~-展示&#34;&gt;#&lt;/a&gt; 💍 &lt;span class=&#34;rainbow&#34;&gt;来吧～展示&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span class=&#34;rainbow&#34;&gt;PHP 代码部分:&lt;/span&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight php&#34;&gt;&lt;figcaption&gt;&lt;span&gt;PHP&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;45&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;/**&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;    * 判断投票&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;    * &lt;span class=&#34;doctag&#34;&gt;@param&lt;/span&gt; VoteModel 投票表&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;    * &lt;span class=&#34;doctag&#34;&gt;@param&lt;/span&gt; $uid 用户id&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;    * &lt;span class=&#34;doctag&#34;&gt;@param&lt;/span&gt; $vid 投票作品id&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;    */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   &lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;vote_up&lt;/span&gt;(&lt;span class=&#34;params&#34;&gt;$uid, $vid&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;   &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;       &lt;span class=&#34;keyword&#34;&gt;if&lt;/span&gt; (Votes::get([&lt;span class=&#34;string&#34;&gt;&amp;#x27;uid&amp;#x27;&lt;/span&gt; =&amp;gt; $uid])) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           $msg = [&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;               &lt;span class=&#34;string&#34;&gt;&amp;#x27;code&amp;#x27;&lt;/span&gt; =&amp;gt; &lt;span class=&#34;number&#34;&gt;1002&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;               &lt;span class=&#34;string&#34;&gt;&amp;#x27;msg&amp;#x27;&lt;/span&gt; =&amp;gt; &lt;span class=&#34;string&#34;&gt;&amp;#x27;您已经投过票了&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           ];&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; json($msg);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;       &amp;#125; &lt;span class=&#34;keyword&#34;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           &lt;span class=&#34;comment&#34;&gt;//没有该投票,添加投票记录&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           $data = [&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;               &lt;span class=&#34;string&#34;&gt;&amp;#x27;uid&amp;#x27;&lt;/span&gt; =&amp;gt; $uid,&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;               &lt;span class=&#34;string&#34;&gt;&amp;#x27;vid&amp;#x27;&lt;/span&gt; =&amp;gt; $vid,&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           ];&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           (&lt;span class=&#34;keyword&#34;&gt;new&lt;/span&gt; Votes())-&amp;gt;save($data);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;       &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;       &lt;span class=&#34;comment&#34;&gt;//获取当前id对应的投票公司&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;       $res = Db::table(&lt;span class=&#34;string&#34;&gt;&amp;#x27;vote&amp;#x27;&lt;/span&gt;)-&amp;gt;where(&lt;span class=&#34;string&#34;&gt;&amp;#x27;id&amp;#x27;&lt;/span&gt;,$vid)-&amp;gt;find();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;       &lt;span class=&#34;comment&#34;&gt;//获取当前投票中的投票数&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;       $total = intval($res[&lt;span class=&#34;string&#34;&gt;&amp;#x27;total_votes&amp;#x27;&lt;/span&gt;]) + &lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;       &lt;span class=&#34;comment&#34;&gt;//更新数据&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;       $result = Db::table(&lt;span class=&#34;string&#34;&gt;&amp;#x27;vote&amp;#x27;&lt;/span&gt;)-&amp;gt;where(&lt;span class=&#34;string&#34;&gt;&amp;#x27;id&amp;#x27;&lt;/span&gt;, $vid)-&amp;gt;update([&lt;span class=&#34;string&#34;&gt;&amp;#x27;total_votes&amp;#x27;&lt;/span&gt; =&amp;gt; $total]);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;       &lt;span class=&#34;comment&#34;&gt;//判断投票数据是否成功&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;       &lt;span class=&#34;keyword&#34;&gt;if&lt;/span&gt; ($result == $result) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           $msg = [&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;               &lt;span class=&#34;string&#34;&gt;&amp;#x27;code&amp;#x27;&lt;/span&gt; =&amp;gt; &lt;span class=&#34;string&#34;&gt;&amp;#x27;1000&amp;#x27;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;               &lt;span class=&#34;string&#34;&gt;&amp;#x27;msg&amp;#x27;&lt;/span&gt; =&amp;gt; &lt;span class=&#34;string&#34;&gt;&amp;#x27;投票成功&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           ];&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; json($msg);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;       &amp;#125; &lt;span class=&#34;keyword&#34;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           $msg = [&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;               &lt;span class=&#34;string&#34;&gt;&amp;#x27;code&amp;#x27;&lt;/span&gt; =&amp;gt; &lt;span class=&#34;string&#34;&gt;&amp;#x27;1001&amp;#x27;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;               &lt;span class=&#34;string&#34;&gt;&amp;#x27;msg&amp;#x27;&lt;/span&gt; =&amp;gt; &lt;span class=&#34;string&#34;&gt;&amp;#x27;系统服务器繁忙&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           ];&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;           &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; json($msg);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;       &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&#34;排行榜以及投票数都是简单操作这里话就不给大家演示提示排行榜直接从数据库查询记录票数的字段进行排序就可以了票数的话直接查询票数字段即可&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#排行榜以及投票数都是简单操作这里话就不给大家演示提示排行榜直接从数据库查询记录票数的字段进行排序就可以了票数的话直接查询票数字段即可&#34;&gt;#&lt;/a&gt; 💍 排行榜，以及投票数，都是简单操作，这里话就不给大家演示，提示：排行榜直接从数据库查询记录票数的字段进行排序就可以了，票数的话直接查询票数字段即可.&lt;/h3&gt;
&lt;p&gt;&lt;span class=&#34;rainbow&#34;&gt;实现效果图如下&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;https://upimage.alexhchu.com/2021/03/10/92d38adf70a8d.png&#34; alt=&#34;效果展示&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;rainbow&#34;&gt;以上代码不以商用&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&#34;以上就是php中投票的实现方式如果那里有不足之处请下方评论我会及时纠正错误有其他相关内容请收藏码坑的博客谢谢&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#以上就是php中投票的实现方式如果那里有不足之处请下方评论我会及时纠正错误有其他相关内容请收藏码坑的博客谢谢&#34;&gt;#&lt;/a&gt; 💍 以上就是 php 中投票的实现方式，如果那里有不足之处请下方评论，我会及时纠正错误，有其他相关内容请收藏 “码坑的博客”，谢谢！&lt;/h2&gt;
&lt;h2 id=&#34;下一期更新使用java实现投票功能本人是一个程序爱好者如以上内容对你有用请记得点赞分享哦&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#下一期更新使用java实现投票功能本人是一个程序爱好者如以上内容对你有用请记得点赞分享哦&#34;&gt;#&lt;/a&gt; 💍 下一期更新使用 Java 实现投票功能，本人是一个程序爱好者，如以上内容对你有用，请记得点赞分享哦，&lt;/h2&gt;
</content>
        <category term="php" />
        <updated>2021-03-10T02:11:31.093Z</updated>
    </entry>
</feed>
